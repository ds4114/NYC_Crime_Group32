<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Results | NYC Crime</title>
  <meta name="description" content="Chapter 4 Results | NYC Crime" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Results | NYC Crime" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Results | NYC Crime" />
  
  
  

<meta name="author" content="Group 32: Abhiram Gaddam, Faizan Dogar, Devan Samant" />


<meta name="date" content="2022-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="interactive-component.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC Crime</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="proposal.html"><a href="proposal.html#content"><i class="fa fa-check"></i><b>2.2.1</b> <em>Content</em></a></li>
<li class="chapter" data-level="2.2.2" data-path="proposal.html"><a href="proposal.html#who-collects-the-data"><i class="fa fa-check"></i><b>2.2.2</b> <em>Who Collects The Data</em></a></li>
<li class="chapter" data-level="2.2.3" data-path="proposal.html"><a href="proposal.html#format-and-importation"><i class="fa fa-check"></i><b>2.2.3</b> <em>Format and Importation</em></a></li>
<li class="chapter" data-level="2.2.4" data-path="proposal.html"><a href="proposal.html#updates"><i class="fa fa-check"></i><b>2.2.4</b> <em>Updates</em></a></li>
<li class="chapter" data-level="2.2.5" data-path="proposal.html"><a href="proposal.html#expected-challenges"><i class="fa fa-check"></i><b>2.2.5</b> <em>Expected Challenges</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#source"><i class="fa fa-check"></i><b>3.1</b> Source</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#data-transformation-and-cleaning"><i class="fa fa-check"></i><b>3.2</b> Data Transformation and Cleaning</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#data-loading"><i class="fa fa-check"></i><b>3.2.1</b> Data Loading</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#bucket-crime-types"><i class="fa fa-check"></i><b>3.2.2</b> Bucket Crime Types</a></li>
<li class="chapter" data-level="3.2.3" data-path="data.html"><a href="data.html#datetime-transformation"><i class="fa fa-check"></i><b>3.2.3</b> Date/Time Transformation</a></li>
<li class="chapter" data-level="3.2.4" data-path="data.html"><a href="data.html#geo-location-fields"><i class="fa fa-check"></i><b>3.2.4</b> Geo-Location Fields</a></li>
<li class="chapter" data-level="3.2.5" data-path="data.html"><a href="data.html#other-derivations"><i class="fa fa-check"></i><b>3.2.5</b> Other Derivations</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#filter-table-for-relevance"><i class="fa fa-check"></i><b>3.3</b> Filter Table for Relevance</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#select-and-rename-columns"><i class="fa fa-check"></i><b>3.4</b> Select and Rename Columns</a></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.5</b> Missing Value Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#crime-category-and-demographic-analysis"><i class="fa fa-check"></i><b>4.1</b> Crime Category and Demographic Analysis</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="results.html"><a href="results.html#race"><i class="fa fa-check"></i><b>4.1.1</b> Race</a></li>
<li class="chapter" data-level="4.1.2" data-path="results.html"><a href="results.html#gender"><i class="fa fa-check"></i><b>4.1.2</b> Gender</a></li>
<li class="chapter" data-level="4.1.3" data-path="results.html"><a href="results.html#crime-by-borough"><i class="fa fa-check"></i><b>4.1.3</b> Crime by Borough</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#time-series-analysis"><i class="fa fa-check"></i><b>4.2</b> Time Series Analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="results.html"><a href="results.html#day-of-week"><i class="fa fa-check"></i><b>4.2.1</b> Day of Week</a></li>
<li class="chapter" data-level="4.2.2" data-path="results.html"><a href="results.html#time-of-day"><i class="fa fa-check"></i><b>4.2.2</b> Time of Day</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#location-analysis"><i class="fa fa-check"></i><b>4.3</b> Location Analysis</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="results.html"><a href="results.html#spatial-distribution-around-columbia"><i class="fa fa-check"></i><b>4.3.1</b> Spatial Distribution Around Columbia</a></li>
<li class="chapter" data-level="4.3.2" data-path="results.html"><a href="results.html#increasing-radius-from-columbia"><i class="fa fa-check"></i><b>4.3.2</b> Increasing Radius from Columbia</a></li>
<li class="chapter" data-level="4.3.3" data-path="results.html"><a href="results.html#cumulative-crime-near-cu"><i class="fa fa-check"></i><b>4.3.3</b> Cumulative Crime Near CU</a></li>
<li class="chapter" data-level="4.3.4" data-path="results.html"><a href="results.html#crime-density"><i class="fa fa-check"></i><b>4.3.4</b> Crime Density</a></li>
<li class="chapter" data-level="4.3.5" data-path="results.html"><a href="results.html#deeper-dive-of-crime-density"><i class="fa fa-check"></i><b>4.3.5</b> Deeper Dive of Crime Density</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="results.html"><a href="results.html#various-other-plots-to-revisedelete"><i class="fa fa-check"></i><b>4.4</b> Various Other Plots (To Revise/Delete)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive Component</a>
<ul>
<li class="chapter" data-level="5.1" data-path="interactive-component.html"><a href="interactive-component.html#interactive-map-of-crime-around-columbia"><i class="fa fa-check"></i><b>5.1</b> Interactive Map of Crime Around Columbia</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC Crime</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Results<a href="results.html#results" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="crime-category-and-demographic-analysis" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Crime Category and Demographic Analysis<a href="results.html#crime-category-and-demographic-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We start our analysis of crime types by investigating what types of crimes occur in what frequencies. We bucketed the numerous crimes from the raw data into logical categories. Note that in the pre-processing stage, we removed a small “Other” category of parking violations and noise complaints.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="results.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#moved factor releveling to data.Rmd</span></span>
<span id="cb15-2"><a href="results.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="results.html#cb15-3" aria-hidden="true" tabindex="-1"></a>df_counts <span class="ot">&lt;-</span> df_key_fields <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(CRIME_CAT) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="results.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_count=</span><span class="fu">n</span>(),</span>
<span id="cb15-5"><a href="results.html#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb15-6"><a href="results.html#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="results.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_counts) <span class="sc">+</span> </span>
<span id="cb15-8"><a href="results.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>CRIME_CAT, <span class="at">x=</span>total_count),</span>
<span id="cb15-9"><a href="results.html#cb15-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="results.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of Reports Per Crime Category &quot;</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="results.html#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-12"><a href="results.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Category&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-13"><a href="results.html#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-8-1.png" width="672" />
We observe that theft or burglary related crimes are the most common by far (more than 2x the next highest category). This category is followed by sex crimes, violent crimes, and fraud/gambling related crimes all of which are relatively close in number. The lowest category by far is drug and alcohol related crimes, perhaps because the policing of these crimes has been relaxed over the last few years.</p>
<p>We can further investigate the data to see the top 15 kinds of crimes and what categories they belong to.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="results.html#cb16-1" aria-hidden="true" tabindex="-1"></a>df_key_fields <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="results.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(OFNS_DESC,FCT_CRIME_CAT) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="results.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="results.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="results.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(freq&gt;2700) %&gt;%</span></span>
<span id="cb16-6"><a href="results.html#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="results.html#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> freq, <span class="at">y =</span> <span class="fu">fct_reorder</span>(OFNS_DESC, freq), <span class="at">color =</span> FCT_CRIME_CAT)) <span class="sc">+</span></span>
<span id="cb16-8"><a href="results.html#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">yend =</span> OFNS_DESC), <span class="at">xend =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;grey50&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-9"><a href="results.html#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="fu">aes</span>(<span class="at">color =</span> FCT_CRIME_CAT)) <span class="sc">+</span></span>
<span id="cb16-10"><a href="results.html#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Top 15 Most Commonly Reported Types of Crime&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-11"><a href="results.html#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-12"><a href="results.html#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Type of Crime&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="results.html#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Aggregate Crime Category&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="results.html#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Here we can see the crime incident that has happened the most frequently is “Petit Larceny”, a form of larceny in which the value of the property taken is generally less than $50.</p>
<p>As expected, 5 of the top 15 crimes are theft or burglary related, which explains why the most common crime category reported is theft. Also, we only see one incident type corresponding to drug and alcohol related crimes.</p>
<div id="race" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Race<a href="results.html#race" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can start our demographic analysis by digging further into the race and gender of both the suspects and victims.
Let us begin by diving into trends between the race of the suspects and victims.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="results.html#cb17-1" aria-hidden="true" tabindex="-1"></a>df_key_fields <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="results.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUSP_RACE, SUSP_RACE_short) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="results.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="results.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="results.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="results.html#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(SUSP_RACE_short,freq,<span class="at">.desc =</span> <span class="cn">TRUE</span>),<span class="at">y=</span>freq)) <span class="sc">+</span></span>
<span id="cb17-7"><a href="results.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-8"><a href="results.html#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_x_discrete(guide = guide_axis(n.dodge=3))+</span></span>
<span id="cb17-9"><a href="results.html#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Reports by Suspect Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-10"><a href="results.html#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Suspect Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="results.html#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-12"><a href="results.html#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;U=Unknown, B=Black, WH=White/Hispanic, W=White, BH=Black/Hispanic, AP=Asian/Pacific Islander, AI=American Indian/Native&quot;</span>) <span class="sc">+</span> </span>
<span id="cb17-13"><a href="results.html#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="results.html#cb18-1" aria-hidden="true" tabindex="-1"></a>df_key_fields <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="results.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(VIC_RACE, VIC_RACE_short) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="results.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="results.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="results.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-6"><a href="results.html#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(VIC_RACE_short,freq,<span class="at">.desc =</span> <span class="cn">TRUE</span>),<span class="at">y=</span>freq)) <span class="sc">+</span></span>
<span id="cb18-7"><a href="results.html#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-8"><a href="results.html#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_x_discrete(guide = guide_axis(n.dodge=3))+</span></span>
<span id="cb18-9"><a href="results.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Reports by Victim Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-10"><a href="results.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Victim Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-11"><a href="results.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span> </span>
<span id="cb18-12"><a href="results.html#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;U=Unknown, B=Black, WH=White/Hispanic, W=White, BH=Black/Hispanic, AP=Asian/Pacific Islander, AI=American Indian/Native&quot;</span>) <span class="sc">+</span> </span>
<span id="cb18-13"><a href="results.html#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-11-1.png" width="672" />
While there is a lot of null/unknown data, we notice that there are clear patterns between the race of the suspect and victim. Visualizing this using a heatmap convinces us of this.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="results.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_key_fields, <span class="fu">aes</span>(VIC_RACE_short, SUSP_RACE_short)) <span class="sc">+</span> </span>
<span id="cb19-2"><a href="results.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>()<span class="sc">+</span></span>
<span id="cb19-3"><a href="results.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">label=</span>comma)<span class="sc">+</span></span>
<span id="cb19-4"><a href="results.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_x_discrete(guide = guide_axis(n.dodge=3)) +</span></span>
<span id="cb19-5"><a href="results.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Suspect Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-6"><a href="results.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Victim Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="results.html#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Victim Race vs Suspect Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="results.html#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;U=Unknown, B=Black, WH=White/Hispanic, W=White, BH=Black/Hispanic, AP=Asian/Pacific Islander, AI=American Indian/Native&quot;</span>, <span class="at">fill=</span><span class="st">&quot;Count&quot;</span>) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>We see from the bar charts that most of the victims are black and also that most of the suspects are black. Logically, the intersection of these two fields is also the highest. This is made evident in the heatmap.</p>
</div>
<div id="gender" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Gender<a href="results.html#gender" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, lets do a gender focused analysis.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="results.html#cb20-1" aria-hidden="true" tabindex="-1"></a>df_key_fields <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="results.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUSP_SEX) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="results.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="results.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="results.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#slice(1:6) %&gt;%</span></span>
<span id="cb20-6"><a href="results.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(SUSP_SEX,freq,<span class="at">.desc =</span> <span class="cn">TRUE</span>),<span class="at">y=</span>freq)) <span class="sc">+</span></span>
<span id="cb20-7"><a href="results.html#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-8"><a href="results.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_x_discrete(guide = guide_axis(n.dodge=3))+</span></span>
<span id="cb20-9"><a href="results.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb20-10"><a href="results.html#cb20-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">x =</span><span class="st">&quot;Suspect Sex&quot;</span></span>
<span id="cb20-11"><a href="results.html#cb20-11" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">y =</span><span class="st">&quot;Count&quot;</span></span>
<span id="cb20-12"><a href="results.html#cb20-12" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">title =</span> <span class="st">&quot;Reports by Suspect Sex&quot;</span></span>
<span id="cb20-13"><a href="results.html#cb20-13" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">subtitle =</span> <span class="st">&quot;M=Male, F=Female, L=Law Enforcement, E=Corporation, D=NY State&quot;</span>, <span class="at">fill=</span><span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-14"><a href="results.html#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">lim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">175000</span>), <span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="results.html#cb21-1" aria-hidden="true" tabindex="-1"></a>df_key_fields <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="results.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(VIC_SEX) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="results.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="results.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="results.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#slice(1:6) %&gt;%</span></span>
<span id="cb21-6"><a href="results.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(VIC_SEX,freq,<span class="at">.desc =</span> <span class="cn">TRUE</span>),<span class="at">y=</span>freq)) <span class="sc">+</span></span>
<span id="cb21-7"><a href="results.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-8"><a href="results.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_x_discrete(guide = guide_axis(n.dodge=3))+</span></span>
<span id="cb21-9"><a href="results.html#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-10"><a href="results.html#cb21-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">x =</span><span class="st">&quot;Victim Sex&quot;</span></span>
<span id="cb21-11"><a href="results.html#cb21-11" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">y =</span><span class="st">&quot;Count&quot;</span></span>
<span id="cb21-12"><a href="results.html#cb21-12" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">title =</span> <span class="st">&quot;Reports by Victim Sex&quot;</span></span>
<span id="cb21-13"><a href="results.html#cb21-13" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">subtitle =</span> <span class="st">&quot;M=Male, F=Female, L=Law Enforcement, E=Corporation, D=NY State&quot;</span>, <span class="at">fill=</span><span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-14"><a href="results.html#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">lim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">175000</span>), <span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-14-1.png" width="672" />
Most of the victims are female, followed closely by males. However, there is a large discrepancy in the counts of suspect genders. Males are by far the highest category, more than 4x the count for females.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="results.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_key_fields, <span class="fu">aes</span>(SUSP_SEX,VIC_SEX)) <span class="sc">+</span> </span>
<span id="cb22-2"><a href="results.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>()<span class="sc">+</span></span>
<span id="cb22-3"><a href="results.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_x_discrete(guide = guide_axis(n.dodge=3)) +</span></span>
<span id="cb22-4"><a href="results.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-5"><a href="results.html#cb22-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">x =</span><span class="st">&quot;Suspect Sex&quot;</span></span>
<span id="cb22-6"><a href="results.html#cb22-6" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">y =</span><span class="st">&quot;Victim Sex&quot;</span></span>
<span id="cb22-7"><a href="results.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">title =</span> <span class="st">&quot;Victim Sex vs Suspect Sex&quot;</span></span>
<span id="cb22-8"><a href="results.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">subtitle =</span> <span class="st">&quot;M=Male, F=Female, L=Law Enforcement, E=Corporation, D=NY State&quot;</span>, <span class="at">fill=</span><span class="st">&quot;Count&quot;</span>) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>–TODO, do we need 3 charts above that show the same thing?
–Just the heatmap is sufficient I think (Abhi)</p>
</div>
<div id="crime-by-borough" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Crime by Borough<a href="results.html#crime-by-borough" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When one decides to attend Columbia University, one may ask themselves which borough should they live in depending on the relative safety of living in each borough. Therefore, following are the plots of count of total crimes and different types of crimes by the boroughs.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="results.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts by Boroughs</span></span>
<span id="cb23-2"><a href="results.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter) <span class="sc">+</span>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_infreq</span>(Borough_short))) <span class="sc">+</span> </span>
<span id="cb23-3"><a href="results.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb23-4"><a href="results.html#cb23-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">x =</span><span class="st">&quot;Borough&quot;</span></span>
<span id="cb23-5"><a href="results.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">y =</span><span class="st">&quot;Count&quot;</span></span>
<span id="cb23-6"><a href="results.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">title =</span> <span class="st">&quot;Crime by Borough&quot;</span></span>
<span id="cb23-7"><a href="results.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">subtitle =</span> <span class="st">&quot;BK=Brooklyn, BX=Bronx, MH=Manhattan, QN=Queens, SI=Staten Island&quot;</span>)<span class="sc">+</span></span>
<span id="cb23-8"><a href="results.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="results.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter) <span class="sc">+</span>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>Borough_short)) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>CRIME_CAT) <span class="sc">+</span> </span>
<span id="cb24-2"><a href="results.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb24-3"><a href="results.html#cb24-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">x =</span><span class="st">&quot;Borough&quot;</span></span>
<span id="cb24-4"><a href="results.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">y =</span><span class="st">&quot;Count&quot;</span></span>
<span id="cb24-5"><a href="results.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">title =</span> <span class="st">&quot;Crime by Borough and Type&quot;</span></span>
<span id="cb24-6"><a href="results.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  ,<span class="at">subtitle =</span> <span class="st">&quot;BK=Brooklyn, BX=Bronx, MH=Manhattan, QN=Queens, SI=Staten Island&quot;</span>)<span class="sc">+</span></span>
<span id="cb24-7"><a href="results.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-17-1.png" width="672" />
From these graphs, we note that with respect to overall crime, Brooklyn has the most crime followed by Manhattan. Secondly, it’s interesting to see that while Brooklyn has more crime of type “SEX CRIMES”, “MAJOR VIOLENT CRIMES”, AND “FRAUD/GAMBLING AND MISC” compared to Manhattan while Manhattan has more crime of type “THEFT OR BURGLARY” and “DRUG AND ALCOHOL RELATED” compared to Brooklyn.</p>
<p>Let us now take a look at other variables in the dataset. After some trial and error, the following yields some insights (looking at only crimes against individuals):</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="results.html#cb25-1" aria-hidden="true" tabindex="-1"></a>counts3 <span class="ot">&lt;-</span> df_filter <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="results.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(VIC_Individual_Flag <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="results.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(VIC_RACE_short, SUSP_RACE_short, CRIME_CAT, BORO_NM, Premise_Derived, VIC_Individual_Flag, VIC_AGE_GROUP, Inside_Outside) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="results.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Freq =</span> <span class="fu">n</span>())</span>
<span id="cb25-5"><a href="results.html#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="results.html#cb25-6" aria-hidden="true" tabindex="-1"></a>vcd<span class="sc">::</span><span class="fu">mosaic</span>(VIC_AGE_GROUP <span class="sc">~</span> BORO_NM <span class="sc">+</span> Inside_Outside, counts3, <span class="at">direction =</span> <span class="fu">c</span>(<span class="st">&quot;v&quot;</span>,<span class="st">&quot;v&quot;</span>, <span class="st">&quot;h&quot;</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-1.png" width="672" />
We see here that more crime occurs inside compared to outside (which aligns with the fact most crime is larceny/theft). What is interesting there does not seem to be a difference between boroughs or age groups. Even accounting for uneven age groups in the raw data, it still seems like 25-44 is the largest category.</p>
</div>
</div>
<div id="time-series-analysis" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Time Series Analysis<a href="results.html#time-series-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To begin the analysis on time, first we would like to justify why we filtered the data for only crimes that took place in 2022.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="results.html#cb26-1" aria-hidden="true" tabindex="-1"></a>ts_year_all <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="results.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(year(Incident_Date) &gt;= 2022) %&gt;%</span></span>
<span id="cb26-3"><a href="results.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">year</span>(Incident_Date))  <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="results.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Complaint_Count =</span> <span class="fu">n</span>() ) <span class="sc">%&gt;%</span> <span class="fu">rename</span>( <span class="at">Incident_Year =</span> <span class="st">`</span><span class="at">year(Incident_Date)</span><span class="st">`</span>)</span>
<span id="cb26-5"><a href="results.html#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="results.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ts_year_all, <span class="fu">aes</span>(<span class="at">x=</span>Incident_Year, <span class="at">y=</span>Complaint_Count )) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb26-7"><a href="results.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb26-8"><a href="results.html#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span> <span class="fu">c</span>(<span class="dv">2000</span>,<span class="dv">2023</span>) ) <span class="sc">+</span></span>
<span id="cb26-9"><a href="results.html#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-10"><a href="results.html#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Date of Incident (Reported in 2022)&quot;</span>,</span>
<span id="cb26-11"><a href="results.html#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Incident Year (raw data)&quot;</span>,</span>
<span id="cb26-12"><a href="results.html#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Number of Reports&quot;</span>,</span>
<span id="cb26-13"><a href="results.html#cb26-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-19-1.png" width="672" />
From this we see that there is a large drop off in historic reports. This make sense as it is more likely that someone would report a crime in the same year that it occurs. Although NYPD allows people to report crimes that occurred in 2020, there will be much fewer of them reported in 2022. If we wanted to use data prior to 2022 we should include the old crime reports for prior years. Also there are some quality issues with historic data as we see very old crimes (year 1500) which indicate some human error or a record-keeping issue.</p>
<p>So focusing on incidents in 2022, we can look at the overall trend during the year.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="results.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter, <span class="fu">aes</span>(<span class="at">x=</span>Incident_Month)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="results.html#cb27-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">fill=</span>..count..),<span class="at">stat=</span><span class="st">&quot;bin&quot;</span>,<span class="at">binwidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb27-3"><a href="results.html#cb27-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="at">n.breaks=</span><span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb27-4"><a href="results.html#cb27-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50000</span>), <span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb27-5"><a href="results.html#cb27-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb27-6"><a href="results.html#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;2022 Crimes Per Month (Q1-Q3)&quot;</span>,</span>
<span id="cb27-7"><a href="results.html#cb27-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Month (as a number)&quot;</span>,</span>
<span id="cb27-8"><a href="results.html#cb27-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Total Reports&quot;</span>,</span>
<span id="cb27-9"><a href="results.html#cb27-9" aria-hidden="true" tabindex="-1"></a>      )</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="results.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#TODO make graph prettier</span></span></code></pre></div>
<p>We can see there are more crimes reported in the summer months, presumably it is warmer. Let’s facet this:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="results.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter, <span class="fu">aes</span>(<span class="at">x=</span>Incident_Month, <span class="at">color=</span></span>
<span id="cb29-2"><a href="results.html#cb29-2" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">fct_infreq</span>(CRIME_CAT)</span>
<span id="cb29-3"><a href="results.html#cb29-3" aria-hidden="true" tabindex="-1"></a>                      )) <span class="sc">+</span></span>
<span id="cb29-4"><a href="results.html#cb29-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">fill=</span>..count..),<span class="at">stat=</span><span class="st">&quot;bin&quot;</span>,<span class="at">binwidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-5"><a href="results.html#cb29-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="at">n.breaks=</span><span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb29-6"><a href="results.html#cb29-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20000</span>), <span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb29-7"><a href="results.html#cb29-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">#facet_grid((CRIME_CAT) ~ .) +</span></span>
<span id="cb29-8"><a href="results.html#cb29-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb29-9"><a href="results.html#cb29-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;2022 Crimes Per Month (Q1-Q3)&quot;</span>,</span>
<span id="cb29-10"><a href="results.html#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Month (as a number)&quot;</span>,</span>
<span id="cb29-11"><a href="results.html#cb29-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Total Reports&quot;</span>,</span>
<span id="cb29-12"><a href="results.html#cb29-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">&quot;Crime Category&quot;</span></span>
<span id="cb29-13"><a href="results.html#cb29-13" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-21-1.png" width="672" />
Maybe, the trend is dominated by theft crimes but it does seem like there is a hump over summer. Uniquely there is a dip for drug crimes.</p>
<div id="day-of-week" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Day of Week<a href="results.html#day-of-week" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s now look at some other time related charts</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="results.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter, <span class="fu">aes</span>(<span class="at">y=</span>CRIME_CAT , <span class="at">fill=</span><span class="fu">fct_rev</span>(Incident_DayOfWeek)) ) <span class="sc">+</span> </span>
<span id="cb30-2"><a href="results.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;count&#39;</span>, <span class="at">position=</span><span class="st">&#39;dodge&#39;</span>) <span class="sc">+</span></span>
<span id="cb30-3"><a href="results.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb30-4"><a href="results.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">&#39;Set2&#39;</span>, <span class="at">breaks=</span><span class="fu">c</span>(<span class="st">&#39;Sun&#39;</span>,<span class="st">&#39;Mon&#39;</span>,<span class="st">&#39;Tue&#39;</span>,<span class="st">&#39;Wed&#39;</span>,<span class="st">&#39;Thu&#39;</span>,<span class="st">&#39;Fri&#39;</span>,<span class="st">&#39;Sat&#39;</span>))<span class="sc">+</span></span>
<span id="cb30-5"><a href="results.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_discrete(breaks=c(&#39;Sun&#39;,&#39;Mon&#39;,&#39;Tue&#39;,&#39;Wed&#39;,&#39;Thu&#39;,&#39;Fri&#39;,&#39;Sat&#39;)) +</span></span>
<span id="cb30-6"><a href="results.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-7"><a href="results.html#cb30-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;2022 Crimes By Day of Week (Q1-Q3)&quot;</span>,</span>
<span id="cb30-8"><a href="results.html#cb30-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Count&quot;</span>,</span>
<span id="cb30-9"><a href="results.html#cb30-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb30-10"><a href="results.html#cb30-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">&quot;Day&quot;</span></span>
<span id="cb30-11"><a href="results.html#cb30-11" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-22-1.png" width="672" />
We see some interesting trends here - Theft is lower on weekends, gambling up on weekends, sex crimes high on Wednesdays surprisingly.</p>
</div>
<div id="time-of-day" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Time of Day<a href="results.html#time-of-day" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s also look at the time of the day:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="results.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter, <span class="fu">aes</span>(<span class="at">x =</span> Incident_HourTime, <span class="at">y=</span><span class="fu">fct_rev</span>(Incident_DayOfWeek), <span class="at">fill=</span><span class="fu">fct_rev</span>(Incident_DayOfWeek) )) <span class="sc">+</span></span>
<span id="cb31-2"><a href="results.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb31-3"><a href="results.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">24</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb31-4"><a href="results.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">&#39;Set2&#39;</span>, <span class="at">breaks=</span><span class="fu">c</span>(<span class="st">&#39;Sun&#39;</span>,<span class="st">&#39;Mon&#39;</span>,<span class="st">&#39;Tue&#39;</span>,<span class="st">&#39;Wed&#39;</span>,<span class="st">&#39;Thu&#39;</span>,<span class="st">&#39;Fri&#39;</span>,<span class="st">&#39;Sat&#39;</span>))<span class="sc">+</span></span>
<span id="cb31-5"><a href="results.html#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-6"><a href="results.html#cb31-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Hourly Breakdown (Total Q1-Q3 2022)&quot;</span>,</span>
<span id="cb31-7"><a href="results.html#cb31-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Time of Day (24 Clock)&quot;</span>,</span>
<span id="cb31-8"><a href="results.html#cb31-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Day of Week&quot;</span></span>
<span id="cb31-9"><a href="results.html#cb31-9" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb31-10"><a href="results.html#cb31-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="results.html#cb32-1" aria-hidden="true" tabindex="-1"></a>      <span class="co">#+ theme_classic(18)</span></span></code></pre></div>
<p>The raw data is rounded to the nearest minute but there is likely binning happening with time reported on the nearest hour. There appears to be a peak at 12:00pm (12 of 24) which is likely a data quality issue in that reports may default to that time when not specified exactly. This also happens as 12:00am (0 of 24) though it is harder to see due to how the ridge plot extrapolates at the boundary. That said, this graph shows that crimes seems to peak at night around 6pm. But is this related to individual crimes and in/around parks?</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="results.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_filter, <span class="fu">aes</span>(<span class="at">x =</span> Incident_HourTime, <span class="at">y=</span>Premise_Derived )) <span class="sc">+</span></span>
<span id="cb33-2"><a href="results.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb33-3"><a href="results.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">24</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb33-4"><a href="results.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>((VIC_Individual_Flag) <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb33-5"><a href="results.html#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-6"><a href="results.html#cb33-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Crimes by Premise and Time for Individuals vs Entities&quot;</span>,</span>
<span id="cb33-7"><a href="results.html#cb33-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;Y = Indivuals, N = Entities/Businesses/NY State&quot;</span>,</span>
<span id="cb33-8"><a href="results.html#cb33-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Time of Day (24 Clock)&quot;</span>,</span>
<span id="cb33-9"><a href="results.html#cb33-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Premise Category&quot;</span></span>
<span id="cb33-10"><a href="results.html#cb33-10" aria-hidden="true" tabindex="-1"></a>      )</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="results.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#TODO Show counts for each of these groups since not representative (ex what is a crime against and entity in a park)? Refer back to moaisic plot</span></span></code></pre></div>
<p>From prior charts, we know that the number of crimes is skewed toward those occurring in “Inside”. This does not represent the magnitude but we can see that for individuals, parks are more ‘dangerous’ at night - more so than other locations. However, it is somewhat comforting to know that this starts to drop off quickly after about 7-8pm.</p>
</div>
</div>
<div id="location-analysis" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Location Analysis<a href="results.html#location-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="spatial-distribution-around-columbia" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Spatial Distribution Around Columbia<a href="results.html#spatial-distribution-around-columbia" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since a component of our research is to analyze how crime is spread out around Columbia University, a visual analysis of spatial distribution of all crime around Columbia is useful. The following is a map centered around Columbia University (CU) that shows where crime is distributed.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="results.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plottting columbia data on a map</span></span>
<span id="cb35-2"><a href="results.html#cb35-2" aria-hidden="true" tabindex="-1"></a>columbia <span class="ot">&lt;-</span> df_filter[df_filter<span class="sc">$</span>dist_to_CU <span class="sc">&lt;=</span> <span class="dv">2000</span>,]</span>
<span id="cb35-3"><a href="results.html#cb35-3" aria-hidden="true" tabindex="-1"></a>columbia <span class="ot">&lt;-</span> columbia[<span class="sc">!</span><span class="fu">is.na</span>(columbia<span class="sc">$</span>dist_to_CU),] <span class="co">#there are 9 rows with missing lat/long info</span></span>
<span id="cb35-4"><a href="results.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="results.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#library(ggmap)</span></span>
<span id="cb35-6"><a href="results.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">register_google</span>(<span class="at">key =</span> <span class="st">&quot;AIzaSyDUVtOF3qSoJEcQAZ9mU0E1rGKQDqcuNGw&quot;</span>)</span>
<span id="cb35-7"><a href="results.html#cb35-7" aria-hidden="true" tabindex="-1"></a>map <span class="ot">=</span> <span class="fu">get_googlemap</span>(<span class="at">center =</span> <span class="fu">c</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">73.963036</span>, <span class="at">lat =</span> <span class="fl">40.807384</span>),<span class="at">zoom =</span> <span class="dv">15</span>)</span>
<span id="cb35-8"><a href="results.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), <span class="at">data =</span> columbia, , <span class="at">color =</span> <span class="st">&#39;red&#39;</span>, <span class="at">position=</span><span class="fu">position_jitter</span>(<span class="at">h=</span><span class="fl">0.0001</span>, <span class="at">w=</span><span class="fl">0.0001</span>), <span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb35-9"><a href="results.html#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb35-10"><a href="results.html#cb35-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb35-11"><a href="results.html#cb35-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb35-12"><a href="results.html#cb35-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb35-13"><a href="results.html#cb35-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb35-14"><a href="results.html#cb35-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Spatial distribution of crime around Columbia University&quot;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-25-1.png" width="672" />
- The above map is useful to see how geographical location of a crime is coded in the dataset - for example, all crimes happening on a particular street (or residences on a particular street) between two avenues is assigned to the lat-long coordinates of the center of that street (See W 111th St to W 124th St for instance).</p>
<ul>
<li><p>Another thing this shows is around which subway station there is more crime. For example, out of the 2 125th st stations, the one on the right has noticeably more crime concentrated around it than the one on the left. Note that the way data is recorded, all crimes that happen inside a subway station are coded to the location of the subway station. So this result could also mean that one station is safer than the other.</p></li>
<li><p>This map could also be used to plan one’s route to and from Columbia depending if safety is a concern. For example, one could see which streets and avenues have less crime concentrated on them and so could indicate which routes are generally safer to travel on.</p></li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="results.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Map of different crime types around Columbia</span></span>
<span id="cb36-2"><a href="results.html#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="results.html#cb36-3" aria-hidden="true" tabindex="-1"></a>map <span class="ot">=</span> <span class="fu">get_googlemap</span>(<span class="at">center =</span> <span class="fu">c</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">73.963036</span>, <span class="at">lat =</span> <span class="fl">40.807384</span>),<span class="at">zoom =</span> <span class="dv">15</span>)</span>
<span id="cb36-4"><a href="results.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), <span class="at">data =</span> columbia, , <span class="at">color =</span> <span class="st">&#39;red&#39;</span>, <span class="at">position=</span><span class="fu">position_jitter</span>(<span class="at">h=</span><span class="fl">0.0001</span>, <span class="at">w=</span><span class="fl">0.0001</span>), <span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb36-5"><a href="results.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb36-6"><a href="results.html#cb36-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb36-7"><a href="results.html#cb36-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb36-8"><a href="results.html#cb36-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb36-9"><a href="results.html#cb36-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb36-10"><a href="results.html#cb36-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>CRIME_CAT)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="increasing-radius-from-columbia" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Increasing Radius from Columbia<a href="results.html#increasing-radius-from-columbia" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following histogram was produced to check how the crime frequency increases with increasing radius away from school.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="results.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Line graph of density at different points</span></span>
<span id="cb37-2"><a href="results.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="results.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(columbia, <span class="fu">aes</span>(dist_to_CU)) <span class="sc">+</span></span>
<span id="cb37-4"><a href="results.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightBlue&quot;</span>, <span class="at">binwidth =</span> <span class="dv">100</span>) <span class="sc">+</span></span>
<span id="cb37-5"><a href="results.html#cb37-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb37-6"><a href="results.html#cb37-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb37-7"><a href="results.html#cb37-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb37-8"><a href="results.html#cb37-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Histogram of Crime by Distance to Columbia&quot;</span>,</span>
<span id="cb37-9"><a href="results.html#cb37-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Distance to CU (meters)&quot;</span>,</span>
<span id="cb37-10"><a href="results.html#cb37-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>,</span>
<span id="cb37-11"><a href="results.html#cb37-11" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>This graph shows that within each 100m radius (up to 2000m away from Columbia), the crime frequency increases. The explanation is that because the increase in area considered within each 100m bin increases polynomially (with the power of 2), it’s only natural that we see more crimes in buckets farther away from Columbia than those closer to columbia because the area considered within each bucket increases more than linearly. It is still interesting to note however that for some buckets the crime frequency goes down even though the area considered goes up. The next plots further investigate this issue using the concept of density of crime.</p>
</div>
<div id="cumulative-crime-near-cu" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Cumulative Crime Near CU<a href="results.html#cumulative-crime-near-cu" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The previous plot motivated us to try to confirm whether the crime frequency follows a quadratic relationship with respect to radius from Columbia University. Note that this would imply that crime scales linearly with the area considered.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="results.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Line graph of density at different points away from Columbia</span></span>
<span id="cb38-2"><a href="results.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(tidyverse)</span></span>
<span id="cb38-3"><a href="results.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#columbia[, Radius := cut(dist_to_CU, breaks = c(0, 101, 201, 301, 401, 501, 601, 701, 801, 901, 1001, 1101, 1201, 1301, 1401, 1501, 1601, 1701, 1801, 1901, 2001), labels = c(&quot;0-100&quot;, &quot;100-200&quot;, &quot;3001-400&quot;, &quot;10001-20000&quot;))]</span></span>
<span id="cb38-4"><a href="results.html#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="results.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(columbia, <span class="fu">aes</span>(dist_to_CU)) <span class="sc">+</span></span>
<span id="cb38-6"><a href="results.html#cb38-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">stat_ecdf</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightBlue&quot;</span>, <span class="at">binwidth =</span> <span class="dv">100</span>) <span class="sc">+</span></span>
<span id="cb38-7"><a href="results.html#cb38-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb38-8"><a href="results.html#cb38-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>percent) <span class="sc">+</span></span>
<span id="cb38-9"><a href="results.html#cb38-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb38-10"><a href="results.html#cb38-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Crime by Distance to Columbia (Cumulative)&quot;</span>,</span>
<span id="cb38-11"><a href="results.html#cb38-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Distance to CU (meters)&quot;</span>,</span>
<span id="cb38-12"><a href="results.html#cb38-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Crime Reports (% of total within 2000m)&quot;</span>,</span>
<span id="cb38-13"><a href="results.html#cb38-13" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Note that the curve roughly follows the shape of the quadratic curve confirming that the crime does increase linearly with area and quadratically with the radius considered. So then, what explains the decline in crime frequency observed in some of the buckets in the previous histogram? (For instance, the bucket that shows the crime frequency to drop between 1100m and 1200m as compared to the bucket that shows the crime frequency within 1000m and 1100m). We further explore this issue in our next plots.</p>
</div>
<div id="crime-density" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Crime Density<a href="results.html#crime-density" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since in the earlier histogram we saw that within some buckets the crime count was decreasing, we wanted to see how the density of crime changes as move away from Columbia generally and also specifically as we move from a bucket of 100m radius to the next bucket of the incremental 100m radius.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="results.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Making dataset to help plot density graphs</span></span>
<span id="cb39-2"><a href="results.html#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="results.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code</span></span>
<span id="cb39-4"><a href="results.html#cb39-4" aria-hidden="true" tabindex="-1"></a>factordist <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">cut</span>(columbia<span class="sc">$</span>dist_to_CU, <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">300</span>, <span class="dv">400</span>, <span class="dv">500</span>, <span class="dv">600</span>, <span class="dv">700</span>, <span class="dv">800</span>, <span class="dv">900</span>, <span class="dv">1000</span>, <span class="dv">1100</span>, <span class="dv">1200</span>, <span class="dv">1300</span>, <span class="dv">1400</span>, <span class="dv">1500</span>, <span class="dv">1600</span>, <span class="dv">1700</span>, <span class="dv">1800</span>, <span class="dv">1900</span>, <span class="dv">2000</span>, <span class="dv">2100</span>)))</span>
<span id="cb39-5"><a href="results.html#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabulate and turn into data.frame</span></span>
<span id="cb39-6"><a href="results.html#cb39-6" aria-hidden="true" tabindex="-1"></a>xout <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(factordist))</span>
<span id="cb39-7"><a href="results.html#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Add cumFreq and proportions</span></span>
<span id="cb39-8"><a href="results.html#cb39-8" aria-hidden="true" tabindex="-1"></a>xout <span class="ot">&lt;-</span> <span class="fu">transform</span>(xout, <span class="at">cumFreq =</span> <span class="fu">cumsum</span>(Freq))</span>
<span id="cb39-9"><a href="results.html#cb39-9" aria-hidden="true" tabindex="-1"></a>xout<span class="sc">$</span>factordist <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(xout<span class="sc">$</span>factordist)</span>
<span id="cb39-10"><a href="results.html#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="results.html#cb39-11" aria-hidden="true" tabindex="-1"></a>density <span class="ot">&lt;-</span> xout <span class="sc">%&gt;%</span> </span>
<span id="cb39-12"><a href="results.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dist =</span> <span class="fu">case_when</span>(factordist<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="dv">100</span>,</span>
<span id="cb39-13"><a href="results.html#cb39-13" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="dv">200</span>,</span>
<span id="cb39-14"><a href="results.html#cb39-14" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">300</span>,</span>
<span id="cb39-15"><a href="results.html#cb39-15" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">4</span> <span class="sc">~</span> <span class="dv">400</span>,</span>
<span id="cb39-16"><a href="results.html#cb39-16" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">5</span> <span class="sc">~</span> <span class="dv">500</span>,</span>
<span id="cb39-17"><a href="results.html#cb39-17" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">6</span> <span class="sc">~</span> <span class="dv">600</span>,</span>
<span id="cb39-18"><a href="results.html#cb39-18" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">7</span> <span class="sc">~</span> <span class="dv">700</span>,</span>
<span id="cb39-19"><a href="results.html#cb39-19" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">8</span> <span class="sc">~</span> <span class="dv">800</span>,</span>
<span id="cb39-20"><a href="results.html#cb39-20" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">9</span> <span class="sc">~</span> <span class="dv">900</span>,</span>
<span id="cb39-21"><a href="results.html#cb39-21" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">10</span> <span class="sc">~</span> <span class="dv">1000</span>,</span>
<span id="cb39-22"><a href="results.html#cb39-22" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">11</span> <span class="sc">~</span> <span class="dv">1100</span>,</span>
<span id="cb39-23"><a href="results.html#cb39-23" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">12</span> <span class="sc">~</span> <span class="dv">1200</span>,</span>
<span id="cb39-24"><a href="results.html#cb39-24" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">13</span> <span class="sc">~</span> <span class="dv">1300</span>,</span>
<span id="cb39-25"><a href="results.html#cb39-25" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">14</span> <span class="sc">~</span> <span class="dv">1400</span>,</span>
<span id="cb39-26"><a href="results.html#cb39-26" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">15</span> <span class="sc">~</span> <span class="dv">1500</span>,</span>
<span id="cb39-27"><a href="results.html#cb39-27" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">16</span> <span class="sc">~</span> <span class="dv">1600</span>,</span>
<span id="cb39-28"><a href="results.html#cb39-28" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">17</span> <span class="sc">~</span> <span class="dv">1700</span>,</span>
<span id="cb39-29"><a href="results.html#cb39-29" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">18</span> <span class="sc">~</span> <span class="dv">1800</span>,</span>
<span id="cb39-30"><a href="results.html#cb39-30" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">19</span> <span class="sc">~</span> <span class="dv">1900</span>,</span>
<span id="cb39-31"><a href="results.html#cb39-31" aria-hidden="true" tabindex="-1"></a>                          factordist<span class="sc">==</span><span class="dv">20</span> <span class="sc">~</span> <span class="dv">2000</span>))</span>
<span id="cb39-32"><a href="results.html#cb39-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-33"><a href="results.html#cb39-33" aria-hidden="true" tabindex="-1"></a>density<span class="sc">$</span>cum_density <span class="ot">&lt;-</span> density<span class="sc">$</span>cumFreq<span class="sc">/</span>(density<span class="sc">$</span>dist <span class="sc">*</span> density<span class="sc">$</span>dist)</span>
<span id="cb39-34"><a href="results.html#cb39-34" aria-hidden="true" tabindex="-1"></a>density <span class="ot">&lt;-</span> density <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">incremental_area =</span> dist<span class="sc">*</span>dist <span class="sc">-</span> <span class="fu">lag</span>(dist<span class="sc">*</span>dist, <span class="at">default =</span> <span class="fu">first</span>(dist<span class="sc">*</span>dist)))</span>
<span id="cb39-35"><a href="results.html#cb39-35" aria-hidden="true" tabindex="-1"></a>density<span class="sc">$</span>incremental_area[density<span class="sc">$</span>incremental_area <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="dv">100</span><span class="sc">*</span><span class="dv">100</span></span>
<span id="cb39-36"><a href="results.html#cb39-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-37"><a href="results.html#cb39-37" aria-hidden="true" tabindex="-1"></a>density<span class="sc">$</span>inc_density <span class="ot">&lt;-</span> density<span class="sc">$</span>Freq<span class="sc">/</span>(density<span class="sc">$</span>incremental_area)</span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="results.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Making density graphs</span></span>
<span id="cb40-2"><a href="results.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(density, <span class="fu">aes</span>(dist, cum_density)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb40-3"><a href="results.html#cb40-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb40-4"><a href="results.html#cb40-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb40-5"><a href="results.html#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Cumulative Crime Density&quot;</span>,</span>
<span id="cb40-6"><a href="results.html#cb40-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Distance to CU (meters)&quot;</span>,</span>
<span id="cb40-7"><a href="results.html#cb40-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Density of Crime (# reports/m^2)&quot;</span>,</span>
<span id="cb40-8"><a href="results.html#cb40-8" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="results.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(density, <span class="fu">aes</span>(dist, inc_density)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb41-2"><a href="results.html#cb41-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma) <span class="sc">+</span></span>
<span id="cb41-3"><a href="results.html#cb41-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb41-4"><a href="results.html#cb41-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Incremental Crime Density&quot;</span>,</span>
<span id="cb41-5"><a href="results.html#cb41-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Distance to CU (meters)&quot;</span>,</span>
<span id="cb41-6"><a href="results.html#cb41-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Density of Crime (# reports/m^2)&quot;</span>,</span>
<span id="cb41-7"><a href="results.html#cb41-7" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<ul>
<li><p>Note that the cumulative density plot shows that crime is less dense within 750m of Columbia after which it becomes more dense. Potential explanations are that there could be extra policing around the campus area, or an increase in crime density due to an increase in population density as we move beyond 750m from Columbia.</p></li>
<li><p>The incremental density plot shows the increase (or decrease) in density as we move from a bucket of 100m to radius to the bucket of next 100m radius around Columbia. Note that this graph also shows what the earlier histogram showed, i.e., for some buckets the density of crime goes down.</p></li>
</ul>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="results.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The following function uses the approximation that each degree of latitude represents 40075 / 360 kilometers and that each degree of longitude represents (40075 / 360) * cos(latitude) kilomemters. </span></span>
<span id="cb42-2"><a href="results.html#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="results.html#cb42-3" aria-hidden="true" tabindex="-1"></a>circles_data <span class="ot">&lt;-</span> <span class="cf">function</span>(centers, radius, <span class="at">nPoints =</span> <span class="dv">100</span>){</span>
<span id="cb42-4"><a href="results.html#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># centers: the data frame that has the lat/long coordinate of our point of interest</span></span>
<span id="cb42-5"><a href="results.html#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># radius: radius measured in kilometer</span></span>
<span id="cb42-6"><a href="results.html#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nPoints: Defines the number of points on the circumference of the circle. The more the number of points, the smoother your circle will be</span></span>
<span id="cb42-7"><a href="results.html#cb42-7" aria-hidden="true" tabindex="-1"></a>    meanLat <span class="ot">&lt;-</span> <span class="fu">mean</span>(centers<span class="sc">$</span>latitude)</span>
<span id="cb42-8"><a href="results.html#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># length per longitude changes with lattitude, so need correction</span></span>
<span id="cb42-9"><a href="results.html#cb42-9" aria-hidden="true" tabindex="-1"></a>    radiusLon <span class="ot">&lt;-</span> radius <span class="sc">/</span><span class="dv">111</span> <span class="sc">/</span> <span class="fu">cos</span>(meanLat<span class="sc">/</span><span class="fl">57.3</span>) </span>
<span id="cb42-10"><a href="results.html#cb42-10" aria-hidden="true" tabindex="-1"></a>    radiusLat <span class="ot">&lt;-</span> radius <span class="sc">/</span> <span class="dv">111</span></span>
<span id="cb42-11"><a href="results.html#cb42-11" aria-hidden="true" tabindex="-1"></a>    circleDF <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="fu">rep</span>(centers<span class="sc">$</span>ID, <span class="at">each =</span> nPoints))</span>
<span id="cb42-12"><a href="results.html#cb42-12" aria-hidden="true" tabindex="-1"></a>    angle <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">2</span><span class="sc">*</span>pi,<span class="at">length.out =</span> nPoints)</span>
<span id="cb42-13"><a href="results.html#cb42-13" aria-hidden="true" tabindex="-1"></a>    circleDF<span class="sc">$</span>lon <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(centers<span class="sc">$</span>longitude, <span class="cf">function</span>(x) x <span class="sc">+</span> radiusLon <span class="sc">*</span> <span class="fu">cos</span>(angle)))</span>
<span id="cb42-14"><a href="results.html#cb42-14" aria-hidden="true" tabindex="-1"></a>    circleDF<span class="sc">$</span>lat <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(centers<span class="sc">$</span>latitude, <span class="cf">function</span>(x) x <span class="sc">+</span> radiusLat <span class="sc">*</span> <span class="fu">sin</span>(angle)))</span>
<span id="cb42-15"><a href="results.html#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(circleDF)</span>
<span id="cb42-16"><a href="results.html#cb42-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-17"><a href="results.html#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="results.html#cb42-18" aria-hidden="true" tabindex="-1"></a>lat_long_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span>), <span class="at">latitude =</span> <span class="fu">c</span>(<span class="fl">40.807384</span>),<span class="at">longitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">73.963036</span>)) <span class="do">##ADDED THIS SO NO ERROR WOULD BE THROWN, IS THIS RIGHT??</span></span>
<span id="cb42-19"><a href="results.html#cb42-19" aria-hidden="true" tabindex="-1"></a>circle_100m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.1</span>)</span>
<span id="cb42-20"><a href="results.html#cb42-20" aria-hidden="true" tabindex="-1"></a>circle_200m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.2</span>)</span>
<span id="cb42-21"><a href="results.html#cb42-21" aria-hidden="true" tabindex="-1"></a>circle_300m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.3</span>)</span>
<span id="cb42-22"><a href="results.html#cb42-22" aria-hidden="true" tabindex="-1"></a>circle_400m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.4</span>)</span>
<span id="cb42-23"><a href="results.html#cb42-23" aria-hidden="true" tabindex="-1"></a>circle_500m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.5</span>)</span>
<span id="cb42-24"><a href="results.html#cb42-24" aria-hidden="true" tabindex="-1"></a>circle_600m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.6</span>)</span>
<span id="cb42-25"><a href="results.html#cb42-25" aria-hidden="true" tabindex="-1"></a>circle_700m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.7</span>)</span>
<span id="cb42-26"><a href="results.html#cb42-26" aria-hidden="true" tabindex="-1"></a>circle_800m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.8</span>)</span>
<span id="cb42-27"><a href="results.html#cb42-27" aria-hidden="true" tabindex="-1"></a>circle_900m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="fl">0.9</span>)</span>
<span id="cb42-28"><a href="results.html#cb42-28" aria-hidden="true" tabindex="-1"></a>circle_1000m <span class="ot">&lt;-</span> <span class="fu">circles_data</span>(lat_long_data, <span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="deeper-dive-of-crime-density" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Deeper Dive of Crime Density<a href="results.html#deeper-dive-of-crime-density" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To finally see why we see buckets of incremental 100m radius away from Columbia with decreasing density of crime, we decided to plot these buckets visually on a google map of the area around Columbia overlapped with the spatial density of crime.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="results.html#cb43-1" aria-hidden="true" tabindex="-1"></a>map <span class="ot">=</span> <span class="fu">get_googlemap</span>(<span class="at">center =</span> <span class="fu">c</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">73.963036</span>, <span class="at">lat =</span> <span class="fl">40.807384</span>),<span class="at">zoom =</span> <span class="dv">15</span>)</span>
<span id="cb43-2"><a href="results.html#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="results.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), <span class="at">data =</span> df_filter, , <span class="at">color =</span> <span class="st">&#39;red&#39;</span>, <span class="at">position=</span><span class="fu">position_jitter</span>(<span class="at">h=</span><span class="fl">0.0001</span>, <span class="at">w=</span><span class="fl">0.0001</span>), <span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_100m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_200m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_300m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_400m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_500m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_600m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_700m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_800m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_900m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> circle_1000m, <span class="fu">aes</span>(lon, lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-4"><a href="results.html#cb43-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-5"><a href="results.html#cb43-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-6"><a href="results.html#cb43-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-7"><a href="results.html#cb43-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb43-8"><a href="results.html#cb43-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Spatial distribution of crime wrt incremental radius of 100m away from Columbia&quot;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>We speculate that we see up and down jumps in incremental crime density due to the following reasons:</p>
<ol style="list-style-type: decimal">
<li><p>While we increase the area in a circular fashion as we move away from Columbia, the lat/long coordinates of crime are recorded with the grid structure of Manhattan in mind. Therefore, some incremental radius/area buckets circles end up having way less crime reported if they contain parts of a park in them (since the crimes within parks are reported as happening on the streets outside the parks).</p></li>
<li><p>Another reason is that many crimes are just reported to the center of the streets (as discussed in the spatial distribution map earlier). What ends up happening is that some incremental radius/area buckets end up including a straight line of all these concentrated crimes which lead to their crime density shooting up- see for example the area between the third last and the second last circle that ends up having majority of the crimes reported on streets W 112th to W 120th.</p></li>
</ol>
</div>
</div>
<div id="various-other-plots-to-revisedelete" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Various Other Plots (To Revise/Delete)<a href="results.html#various-other-plots-to-revisedelete" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>–ATTEMPT AT MOSAIC PLOT</p>
<p>–perhaps we can rename some values as a new field in the data.Rmd so that this shows a little cleaner?</p>
<p>–try mixing and matching more fields in different moasics to see if anything pops? Open to other ideas but pretty sure we need a graph with 3+ categorical vars given this dataset. Try mosaic pair plots too.</p>
<p>–add other charts about borough or jurisdiction? Age group? Might need to try a bunch but we’ll only include the ones we think look interesting (ie. where there is a pattern or anomaly/skew or something we can tie to real life)</p>
<p>Heat map version:
–need to clean these columns? add garbage values to unknown</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interactive-component.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ds4114/NYC_Crime_Group32/edit/main/results.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ds4114/NYC_Crime_Group32/blob/main/results.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
